<main>
  <app-nav-bar></app-nav-bar>

  <div class="container ">
    <div class="row">
      <div class="col">
        <h1  *ngIf="user.isAdmin; else adminButton" class="text-center">Hello {{ user.firstName }} 
          <button style="margin-right: 1em;" routerLink="/profile/{{user.userName}}" class="btn btn-outline-success">Your Profile</button>
           <button routerLink="/admin/{{user.userName}}" class="btn btn-outline-warning">Admin Page</button></h1>
        <ng-template #adminButton>
          <h1 class="text-center">Hello {{ user.firstName }}
             <button routerLink="/profile/{{user.userName}}" class="btn btn-outline-success">Your Profile</button></h1>
        </ng-template>
      </div>
    </div>
    &nbsp;
    <hr>
    &nbsp;
    <div class="row ">
      <div class="col-md-7" *ngFor="let u of user.subscriptionInfo"> 
        <h4>Your next delivery date is: {{u.date}} 
           <button style="margin-left: 1em;" routerLink="/view-subscription/{{u._id}}" class="btn btn-outline-success">View Subscription</button>
          
          </h4>
          
      </div>

      <div class="col-md-2">
        <p>Skip for: </p>          
      </div>

 

      <div class="col-md-2">
        <select class="form-control form-control-sm" (change)="selectOption($event.target.value)" [(ngModel)]="selected">
          <option [value]="1">1 week</option>
          <option [value]="2">2 weeks</option>
          <option [value]="3">1 month</option>
        </select>
      </div>


      
      <div class="col-md-1">
        <button class="btn btn-outline-success" (click)="pause()">Apply</button>
      </div>
    </div>

    &nbsp;
    <div class="row">
      <div class="col">
        <h4>Your past deliveries</h4>
      </div>
    </div>

    <table class="tableStyle text-center">
      <tr *ngFor="let u of user.pastDeliveries">
        <td>{{ u.subName }}</td>
        <td>{{u.date}}</td>
        <td><button style="margin: .5em;" routerLink="/view-subscription/{{u._id}}" class="btn btn-outline-success">View Subscription</button></td>
        <td><button style="margin: .5em;" routerLink="/review/{{user.userName}}" class="btn btn-outline-success">Leave a review</button></td>
      </tr>
    </table>

    &nbsp;
    <div class="row">
      <div class="col">
        <h4 [hidden]="!reviews">Your Reviews</h4>
      </div>
    </div>

    <table class="tableStyle text-center">
      <tr *ngFor="let r of reviews">
        <td>{{r.subName}}</td>
        <td>{{ r.review }}</td>
        <td>{{r.rating}}</td>
        <td>{{ r.date}}</td>
        <!-- <td><button style="margin: .5em;" routerLink="/view-subscription/{{r._id}}" class="btn btn-outline-success">View Subscription</button></td> -->
        <!-- <td><button style="margin: .5em;" routerLink="/review/{{user.userName}}" class="btn btn-outline-success">Leave a review</button></td> -->
      </tr>
    </table>

  </div>
</main>
